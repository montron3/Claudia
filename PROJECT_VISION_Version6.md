# üìÑ ricevuta. studio - Project Vision

## Overview

**Dominio**: ricevuta.studio (gi√† acquisito)

**Nome Piattaforma**: ricevuta.studio (senza brand aggiuntivo)

**Claim/Tagline**: "prestazione occasionale facile"

---

## Branding e Identit√† Visiva

### Logo
- **Stile**: Minimalista e moderno
- **Colore principale**: Blu professionale
- **Status**: Da creare

### Tone of Voice
**Amichevole e informale**

- ‚úÖ "Ciao! Ecco come funziona..."
- ‚úÖ Approccio friendly e accessibile
- ‚úÖ Linguaggio semplice, senza troppo tecnicismo
- ‚ùå NON professionale/istituzionale ("Gentile utente...")
- ‚ùå NON eccessivamente educativo/paternalistico

**Obiettivo**: Far sentire l'utente a suo agio, come se stesse parlando con un amico che lo aiuta con la burocrazia.

### Palette Colori
- **Primario**: Blu professionale (da definire tonalit√† esatta)
- **Secondari**: Da definire in fase di design
- **Accent**: Da definire in fase di design

---

## Motivazione del Progetto

Questo progetto nasce da:  
- **Un'esigenza personale**: la difficolt√† nel gestire la burocrazia delle prestazioni occasionali
- **Passione per la programmazione**: voglia di creare uno strumento utile e tecnicamente valido
- **Passione per l'informazione**: rendere accessibili informazioni fiscali complesse

**Obiettivo**:  Creare un facilitatore che aiuti chi lavora occasionalmente a non avere paura della burocrazia. 

---

## ‚ö†Ô∏è DISCLAIMER IMPORTANTE

**La piattaforma NON fornisce consulenza fiscale.**

- √à un **facilitatore programmato** seguendo le normative vigenti
- Pu√≤ **commettere errori** 
- **NON sostituisce il commercialista**
- √à **buona norma integrare un commercialista** per verificare e validare i documenti

**Consiglio**:  Utilizzare la piattaforma per generare i documenti, poi farli verificare dal proprio commercialista prima di utilizzarli ufficialmente.

---

## Scopo e Obiettivi

Facilitare la produzione di ricevute per prestazioni autonome occasionali, visto che √® un argomento molto ricercato ma anche tanto "misterioso" e pieno di contraddizioni.

---

## Pubblico Target

### 1. Prestatore (Privato)
Privati che vogliono lavorare e non avere l'ansia della burocrazia. 

### 2. Committente (Privato o P.IVA)
Privato o p.iva che non vuole rincorrere il proprio commercialista e facilitarne il lavoro, poter gestire tutte le collaborazioni occasionali in autonomia.

### 3. Commercialista
Pu√≤ collegarsi, visionare, correggere e scaricare i documenti ed avere il lavoro facilitato.

---

## Modalit√† d'Uso della Piattaforma

La piattaforma pu√≤ essere utilizzata in **modalit√† completa** (tutti gli utenti registrati) oppure in **modalit√† standalone** (solo una figura utilizza la piattaforma).

### Modalit√† Completa (Tutti Registrati)
Prestatore, committente ed eventualmente commercialista sono tutti registrati sulla piattaforma e collaborano insieme.

### Modalit√† Standalone

#### Modalit√† A: Solo Prestatore
**Scenario**: Il prestatore √® l'unico registrato sulla piattaforma.  Il committente NON √® registrato.

**Flusso**:
1. Il prestatore crea la ricevuta autonomamente
2. Il prestatore paga la commissione **0. 8%** (solo la sua parte)
3. La piattaforma **guida step-by-step il prestatore** su cosa deve chiedere al committente e quando
4. La piattaforma genera **notifiche e promemoria** per il prestatore su:  
   - Cosa chiedere al committente (es. F24, CU)
   - Entro quando richiederlo
   - Come verificare che sia stato fatto
5. **Responsabilit√†**: Il prestatore deve assicurarsi che il committente adempia agli obblighi
6. Le notifiche spariscono quando il prestatore le segna come "gi√† fatto"

**Nota**: La piattaforma NON genera F24 o CU per il committente (non registrato), ma **istruisce il prestatore** su cosa richiedere. 

#### Modalit√† B: Solo Committente
**Scenario**:  Il committente √® l'unico registrato sulla piattaforma.  Il prestatore NON √® registrato.

**Flusso**:
1. Il committente carica i dati della ricevuta
2. Il committente paga la commissione **1.3%** (se sostituto d'imposta, solo la sua parte)
3. La piattaforma convalida i dati e genera F24, CU, e altri documenti per il committente
4. La piattaforma genera **notifiche e promemoria** per il committente su:  
   - Cosa chiedere al prestatore (es. firma ricevuta, applicazione marca da bollo)
   - Entro quando
   - Come verificare
5. **Responsabilit√†**:  Il committente deve assicurarsi che il prestatore firmi la ricevuta e applichi la marca da bollo (se necessaria)
6. Le notifiche spariscono quando il committente le segna come "gi√† fatto"

**Nota**: La piattaforma genera i documenti per il committente, ma **istruisce il committente** su cosa far fare al prestatore.

#### Modalit√† C: Solo Commercialista
**Scenario**: Il commercialista usa la piattaforma per conto dei suoi clienti.  N√© prestatore n√© committente sono registrati.

**Flusso**:
1. Il commercialista carica tutti i dati e genera tutti i documenti
2. Il commercialista paga la commissione **1.8%** del valore della ricevuta (unica commissione)
3. Il commercialista pu√≤ **inserire email** di prestatore e/o committente per inviare automaticamente i documenti
4. L'invio email avviene da **noreply@ricevuta.studio** con documenti allegati
5. La piattaforma genera **notifiche e promemoria** per il commercialista su:  
   - Cosa far firmare/applicare ai clienti (marca da bollo, firma, ecc.)
   - Scadenze
6. **Responsabilit√†**: Il commercialista gestisce tutto il processo e coordina prestatore e committente
7. Le notifiche spariscono quando il commercialista le segna come "gi√† fatto"

---

## Funzionalit√† Principali

L'utente potr√†:
- Trovare **informazioni basate su fonti ufficiali**
- Avere un **SaaS che pu√≤ gestire la produzione dei documenti necessari**
- Avere tutte le **linee guida per non temere la burocrazia, gli adempimenti e le scadenze**

L'utente pu√≤ essere il prestatore (privato), il committente (privato, p.iva), il commercialista. 

Il SaaS deve essere solo una parte del sito al quale l'utente **accede e si registra in autonomia con magic link**. 

### Documenti Generati
Il SaaS non produce solo ricevute ma **tutti i documenti necessari** sia al prestatore che al committente: 
- Ricevute
- F24
- CU (Certificazione Unica) autogenerato
- Altri documenti fiscali richiesti

---

## Gestione Utenti e Ruoli

### Ruoli Multipli
Un utente pu√≤ essere contemporaneamente **prestatore E committente** con lo stesso account, ma **non pu√≤ essere committente e prestatore nella stessa transazione**.

### Collegamento tra Utenti

#### Prestatore ‚Üî Committente
- **Collegamento bidirezionale**: sia il prestatore che il committente possono invitare l'altro a una collaborazione
- Il committente pu√≤ **cercare e aggiungere prestatori**
- Il prestatore pu√≤ invitare committenti

#### Commercialista ‚Üî Clienti
- Il commercialista **deve essere autorizzato da entrambe le parti** (prestatore e committente)
- Entrambe le parti hanno **pieno controllo** sull'autorizzazione
- Il commercialista pu√≤ **invitare nuovi utenti** alla piattaforma

### Gestione Permessi e Autorizzazioni

**Tutte e 3 le figure** (prestatore, committente, commercialista) possono gestire le autorizzazioni in autonomia: 

#### Il Prestatore pu√≤:
- Autorizzare un commercialista ad accedere ai suoi dati
- **Revocare l'autorizzazione** in qualsiasi momento
- Vedere quali commercialisti hanno accesso

#### Il Committente pu√≤: 
- Autorizzare un commercialista ad accedere ai suoi dati
- **Revocare l'autorizzazione** in qualsiasi momento
- Vedere quali commercialisti hanno accesso

#### Il Commercialista pu√≤:
- Vedere quali clienti lo hanno autorizzato
- **Rimuovere l'accesso** se non vuole pi√π seguire un cliente
- Richiedere autorizzazione a nuovi clienti

**Scenario tipico**:
1. Cliente Mario autorizza Commercialista Rossi
2. Commercialista Rossi accede ai dati di Mario
3. Mario cambia commercialista
4. Mario **revoca l'autorizzazione** ‚Üí Commercialista Rossi perde immediatamente l'accesso

### Permessi Commercialista

Il commercialista pu√≤: 
- ‚úÖ Visualizzare e scaricare documenti dei suoi clienti autorizzati
- ‚úÖ **Modificare/correggere ricevute prima che vengano generate**
- ‚úÖ **Modificare importi o codici tributo negli F24**
- ‚úÖ **Modificare il CU autogenerato**
- ‚úÖ **Creare ricevute per conto dei clienti**
- ‚úÖ Usare il SaaS **gratuitamente** (in modalit√† completa)
- ‚úÖ **Guadagnare incentivi** (vedi Business Model)

---

## Onboarding e Primo Utilizzo

### Prima Transazione GRATUITA üéÅ

**Per incentivare l'utilizzo della piattaforma, la prima transazione √® gratuita per tutti gli utenti.**

#### Modalit√† Senza Stripe (Pagamento Esterno)
- **Prima ricevuta**: completamente **GRATUITA** (0% commissioni)
- Dalla seconda ricevuta in poi: commissioni normali (0.8%, 1.3%, ecc.)

#### Modalit√† Con Stripe (Pagamento Gestito)
- **Prima ricevuta**: **commissioni scontate**
  - Tra privati: **0.8% + 0.8%** (invece di 1.5% + 1.5%)
  - Con sostituto d'imposta: **0.8% + 1.3%** (invece di 1.5% + 2.5%)
- Dalla seconda ricevuta in poi:  commissioni piene (1.5% + 1.5% o 1.5% + 2.5%)

### Esperienza Primo Accesso

**Obiettivo**: Guidare l'utente nel modo pi√π **interattivo possibile**. 

**Nota**: I dettagli dell'onboarding interattivo verranno sviluppati successivamente. 

Idee da esplorare:
- Tutorial guidato step-by-step
- Wizard iniziale per raccogliere dati anagrafici/fiscali
- Tooltip contestuali
- Video tutorial
- Demo interattiva

---

## Dashboard e Visualizzazione Dati

### Dashboard Prestatore

#### Sezioni Base
- **Elenco ricevute emesse**
- **Totale guadagni annui**
- **Elenco committenti**
- **Scadenze fiscali**
- **CU (Certificazione Unica)**

#### Sezioni Avanzate

**1. Tracker ‚Ç¨5. 000 INPS**
- Barra di progressione visiva (quanto manca al limite ‚Ç¨5.000)
- **Notifica a ‚Ç¨4.500**:  "Stai per raggiungere il limite INPS"
- Notifica quando si supera ‚Ç¨5.000
- Storico anno corrente vs anni precedenti
- **Nota**: Il limite ‚Ç¨5.000 √® solo per l'iscrizione INPS, non blocca l'emissione di ricevute

**2. Situazione Fiscale Attuale**
- Mostra chiaramente in quale situazione si trova il prestatore: 
  - "Prestazione occasionale pura" (sotto ‚Ç¨5.000 - senza obbligo INPS)
  - "Prestazione occasionale con INPS" (sopra ‚Ç¨5.000 - iscrizione obbligatoria)
- Riepilogo dati anagrafici e fiscali
- Codice fiscale, IBAN
- Indicazioni su prossimi step

**3. Calendario Scadenze Personalizzato**
- Scadenze F24 con countdown
- Promemoria dichiarazione redditi
- Avvisi personalizzati per ogni ricevuta

**4. Marche da Bollo**
- **Archivio foto marche da bollo conservate**:  ben catalogate e associate alla ricevuta specifica
- Promemoria scadenza conservazione (10 anni)
- Ricevute in attesa di applicazione marca da bollo

**5. Statistiche & Analytics**
- Grafico guadagni mensili/trimestrali
- Committente pi√π frequente
- Media importo per ricevuta
- Trend anno su anno

**6. Documenti da Firmare/Completare**
- Ricevute in attesa di marca da bollo
- Documenti incompleti
- **Alert rossi per urgenze**

**7. Template & Automazioni**
- Template ricevuta preimpostato per committenti ricorrenti
- Creazione ricevuta ricorrente automatica
- Impostazioni pagamento automatico

**8. Notifiche & Messaggi**
- Comunicazioni dal commercialista
- Aggiornamenti normativi importanti
- Richieste da committenti
- **Notifiche task**:  "Cosa fare" ‚Üí utente segna come "gi√† fatto" ‚Üí notifica sparisce

**9. Esportazione Dati**
- Scarica report annuale per commercialista
- Esporta Excel/CSV tutte le ricevute
- Backup documenti

---

### Dashboard Committente

#### Sezioni Base
- **Elenco collaboratori**
- **Totale prestazioni pagate**
- **Ritenute versate**
- **F24 da pagare**
- **CU (Certificazione Unica)**

#### Sezioni Avanzate

**1. Centro Controllo Collaborazioni**
- Stato di ogni collaborazione (attiva/conclusa)
- Collaborazioni in attesa di pagamento
- Collaborazioni con documenti incompleti

**2. Calendario Versamenti**
- Scadenze F24 per ritenute d'acconto
- Calendario fiscale annuale
- Promemoria Modello 770

**3. Budget & Forecast**
- Il committente pu√≤ impostare un **budget massimo annuale** (opzionale)
- Grafico "Speso vs Previsto"
- Quanto speso fino ad ora vs quanto previsto
- **Proiezione costi** fino a fine anno
- Alert quando si avvicina al limite budget
- **Esempio**: Budget ‚Ç¨20.000 ‚Üí Spesi ‚Ç¨12.000 (60%) ‚Üí Proiezione:  sforamento a ottobre

**4. Ritenute d'Acconto - Riepilogo**
- Totale ritenute trattenute nel trimestre/anno
- Quanto versato vs quanto da versare
- Dettaglio per prestatore

**5. Statistiche Collaboratori**
- Prestatori pi√π utilizzati
- Spesa media per prestatore
- Grafico andamento collaborazioni

**6. Gestione Documenti**
- Archivio CU rilasciate
- Ricevute ricevute (da prestatori)
- F24 pagati con ricevuta

**7. Template & Automazioni**
- Template ricevuta preimpostato per prestatori ricorrenti
- Creazione ricevuta ricorrente automatica
- Impostazioni pagamento automatico

**8. Alert & Compliance**
- Avvisi documenti mancanti
- **Check compliance**: tutti i documenti in regola? 
- Suggerimenti commercialista

**9. Notifiche & Messaggi**
- Comunicazioni dal commercialista
- Aggiornamenti normativi
- **Notifiche task**: "Cosa fare" ‚Üí utente segna come "gi√† fatto" ‚Üí notifica sparisce

**10. Esportazione Dati**
- Report annuali
- Export Excel/CSV
- Backup documenti

---

### Dashboard Commercialista

#### Sezioni Base
- **Lista clienti autorizzati**
- **Documenti da revisionare**
- **Statistiche**

#### Sezioni Avanzate

**1. Centro Revisione Documenti**
- **Coda priorit√†**: documenti urgenti da revisionare
- Filtro per tipo documento (ricevute/F24/CU)
- Filtro per cliente
- Stato revisione (da fare/in corso/completato)

**2. Dashboard Multi-Cliente**
- Vista aggregata di tutti i clienti
- Totale ricevute gestite
- Totale commissioni guadagnate (referral)
- Alert problemi su tutti i clienti

**3. Calendario Fiscale Unificato**
- Scadenze di TUTTI i clienti in un unico calendario
- Filtri per cliente/tipo scadenza
- Export calendario per software contabilit√†

**4. Referral & Guadagni**
- Dashboard guadagni da referral
- Utenti invitati:  quanti attivi/inattivi
- Storico commissioni mensili
- Link invito personalizzato

**5. Anomalie & Alert**
- Documenti con errori
- Clienti che superano soglie (‚Ç¨5.000)
- Ricevute senza marca da bollo
- Contributi INPS mancanti

**6. Strumenti di Modifica Massiva**
- Correzione codici tributo su pi√π F24
- Approvazione multipla documenti
- Esportazione massiva per studio

**7. Report & Analytics**
- Report annuale per cliente
- Statistiche aggregate
- Confronto anno su anno per ogni cliente
- Export per software contabilit√† (Teamsystem, Zucchetti, ecc.)

**8. Comunicazioni con Clienti**
- Chat/messaggi diretti con prestatori e committenti
- Invio richieste correzioni
- Notifiche di approvazione documenti

**9. Template e Best Practices**
- Salvataggio template ricevute corrette
- Note/appunti per cliente
- Checklist personalizzate

**10. Gestione Permessi**
- Lista clienti che hanno autorizzato l'accesso
- Richieste di autorizzazione in sospeso
- **Rimozione accesso**:  il commercialista pu√≤ rimuovere l'accesso se non vuole pi√π seguire un cliente
- Storico accessi

**11. Notifiche & Task**
- **Notifiche task**: "Cosa fare" ‚Üí commercialista segna come "gi√† fatto" ‚Üí notifica sparisce

---

### Sezioni Comuni a Tutte le Dashboard

**1. Widget Personalizzabili**
- L'utente pu√≤ scegliere quali sezioni visualizzare
- **Drag & drop** per riordinare
- Nascondi sezioni non utilizzate

**2. Centro Notifiche Unificato**
- Tutte le notifiche in un unico posto
- Badge con numeri non letti
- Filtro per tipo notifica
- **Sistema "Segna come fatto"**:  l'utente segna task completati ‚Üí notifica sparisce

**3. Ricerca Globale**
- Ricerca veloce documenti/utenti/transazioni
- Filtri avanzati

**4. Supporto & Help**
- Chat supporto
- Link a guide/FAQ

**5. Preferenze & Impostazioni**
- Personalizzazione dashboard
- Notifiche email/push
- Privacy e sicurezza

---

## üìä Dashboard Analytics Admin (Interno)

### Obiettivo

Dashboard **interno per l'amministratore** della piattaforma per monitorare tutte le metriche chiave, performance e comportamento degli utenti.

**Accesso**:  Solo admin (non visibile agli utenti)

---

### Metriche da Tracciare

#### 1. Metriche Utenti

**Registrazioni**: 
- Utenti registrati al giorno/settimana/mese
- Trend registrazioni nel tempo
- Provenienza registrazioni (blog, direct, referral commercialisti, ricerca Google)

**Conversion Funnel**:
- Visitatore ‚Üí Utente registrato (%)
- Utente registrato ‚Üí Prima ricevuta creata (%)
- Prima ricevuta ‚Üí Seconda ricevuta (retention) (%)
- Utente gratuito ‚Üí Utente pagante (%)

**Segmentazione**:
- Quanti prestatori / committenti / commercialisti
- Distribuzione geografica (regioni)
- Tipologia committenti (privati vs sostituti d'imposta)

#### 2. Metriche Ricevute

**Volume**:
- Ricevute generate al giorno/settimana/mese
- Totale ricevute dall'inizio
- Valore medio ricevuta (‚Ç¨)
- Valore totale transato sulla piattaforma

**Tasso di Completamento**:
- Ricevute iniziate vs completate (%)
- Dove abbandonano (quale step del processo)?
- Tempo medio per completare una ricevuta

**Modalit√†**:
- Quante ricevute con Stripe vs senza Stripe
- Quante ricevute in modalit√† completa vs standalone
- Distribuzione:  solo prestatore / solo committente / solo commercialista

#### 3. Metriche Commercialisti e Referral

**Commercialisti Attivi**:
- Quanti commercialisti registrati
- Quanti commercialisti attivi (almeno 1 cliente autorizzato)
- Quanti commercialisti nel programma referral

**Performance Referral**:
- Utenti invitati da commercialisti (totale e per commercialista)
- Conversion rate utenti invitati ‚Üí utenti attivi (%)
- Top 10 commercialisti per utenti portati
- Commissioni pagate ai commercialisti (totale e mensile)

#### 4. Metriche Blog

**Traffico Blog**:
- Visite totali al blog
- Articoli pi√π visitati (top 10)
- Tempo medio di lettura per articolo
- Bounce rate per articolo

**Conversion Blog ‚Üí SaaS**:
- Quanti visitatori del blog si registrano al SaaS (%)
- Quali articoli convertono di pi√π
- Tempo medio da prima visita blog ‚Üí registrazione

#### 5. Metriche Churn e Retention

**Retention**:
- Quanti utenti tornano dopo la prima ricevuta (%)
- Retention rate a 7 giorni / 30 giorni / 90 giorni
- Utenti attivi mensili (MAU) vs utenti totali

**Churn**: 
- Tasso di abbandono (utenti che non tornano)
- Motivi di churn (se tracciabile:  feedback, survey)

#### 6. Metriche Revenue

**Commissioni**:
- Revenue giornaliero/settimanale/mensile
- Breakdown revenue per modalit√† (Stripe vs non-Stripe)
- Breakdown revenue per tipologia utente (prestatore/committente/commercialista)
- MRR (Monthly Recurring Revenue) - se applicabile

**Lifetime Value (LTV)**:
- Valore medio generato da un utente nel tempo
- LTV per segmento (prestatore/committente/commercialista)

---

### Dashboard Visuale

#### Sezioni della Dashboard Admin

**1. Overview (Homepage Dashboard)**
- KPI principali in card: 
  - Utenti registrati (totale + delta oggi)
  - Ricevute generate oggi/settimana
  - Revenue oggi/mese
  - Tasso conversione visitatore ‚Üí utente
- Grafici principali:
  - Trend registrazioni ultimi 30 giorni
  - Trend ricevute ultimi 30 giorni
  - Funnel conversion

**2. Utenti**
- Tabella utenti con filtri (data registrazione, tipo, attivit√†)
- **Ricerca utente**: per email, nome, codice fiscale, ID
- **Drill-down utente singolo**: click su utente ‚Üí vedi dettaglio completo
- Export CSV/Excel utenti

**3. Ricevute**
- Tabella tutte le ricevute
- Filtri:  data, modalit√†, stato (completa/incompleta), importo
- Tasso completamento (%)
- Funnel abbandono (visualizzazione step-by-step)

**4. Commercialisti & Referral**
- Tabella commercialisti
- Performance referral per commercialista
- Commissioni pagate
- Top performers

**5. Blog**
- Analytics articoli:  visite, tempo lettura, conversion rate
- Articoli top performers
- Heatmap:  quali articoli portano pi√π registrazioni

**6. Revenue & Finance**
- Grafici revenue nel tempo
- Breakdown per canale/modalit√†
- Proiezioni revenue (forecast)

**7. Churn & Retention**
- Cohort analysis (retention per coorte di registrazione)
- Grafici churn rate
- Utenti a rischio churn (inattivi da X giorni)

---

### Sistema Ricerca e Log Utenti

#### Ricerca Utente Avanzata

L'admin pu√≤ **cercare facilmente qualsiasi utente** tramite:
- Email
- Nome/Cognome
- Codice fiscale
- User ID
- Numero telefono

**Risultato ricerca**:  Click su utente ‚Üí apre **pagina dettaglio utente**

#### Pagina Dettaglio Utente

Mostra tutte le informazioni su un singolo utente:  

**Informazioni Base**:
- Dati anagrafici completi
- Data registrazione, ultimo login
- Tipo utente (prestatore/committente/commercialista)
- Stato account (attivo/inattivo/bannato)

**Attivit√†**:
- Numero ricevute create
- Totale transato (‚Ç¨)
- Prima e ultima ricevuta
- Tasso completamento ricevute

**Audit Trail Completo**:
- **Tutti i log** dell'utente in ordine cronologico (azioni, login, documenti, pagamenti)
- Filtri per tipo evento
- Filtri per data

**Export Log**:
- **Export log da data a data** in formato CSV/JSON
- Esempio: "Esporta tutti i log dell'utente dal 01/01/2026 al 31/01/2026"
- Utile per audit, reclami, verifiche

**Azioni Admin**:
- Invia email all'utente
- Resetta password
- Disabilita/Riattiva account
- Aggiungi nota interna
- Visualizza documenti generati

---

### Tecnologie per Analytics

#### Tool Interno (Custom Dashboard)

**Frontend**:
- **Next.js** con dashboard dedicata `/admin`
- **Grafici**:  Recharts, Chart.js, o D3.js
- **Tabelle**: TanStack Table (React Table)

**Backend**:
- Query PostgreSQL (Supabase) con aggregazioni
- API dedicate per dashboard admin
- Caching per performance (Redis opzionale)

**Autenticazione**:
- Accesso solo per admin (role-based)
- Autenticazione sicura

#### Tool Esterni (Opzionali)

**NON richiesti**, ma potrebbero integrare:
- Google Analytics (se in futuro si aggiungono cookie analytics)
- Plausible Analytics (privacy-focused, senza cookie)
- Mixpanel / Amplitude (per funnel avanzati)

**Per ora**:  Solo **dashboard interno custom**. 

---

### Privacy e GDPR

**Importante**: I dati analytics aggregati sono OK.  I dati personali visibili in dashboard admin devono essere: 
- Accessibili solo ad admin autorizzati
- Loggati (chi ha visualizzato i dati di quale utente)
- Conformi GDPR (l'utente pu√≤ richiedere accesso/cancellazione)

---

## Business Model

### Calcolatore Gratuito
- **Bidirezionale**: inserisco importo lordo ‚Üí calcola netto, ritenute, contributi INPS (e viceversa)
- **Specifico per caso d'uso**
- Include calcolo marca da bollo (quando necessaria)

### Sistema a Commissioni (% sull'importo lordo della ricevuta)

#### Prima Transazione - GRATUITA/SCONTATA üéÅ

| Modalit√† | Prima Transazione |
|----------|-------------------|
| Senza Stripe | **GRATUITA** (0% commissioni) |
| Con Stripe - Privati | **0.8% + 0.8%** (sconto da 1. 5% + 1.5%) |
| Con Stripe - Sostituto imposta | **0.8% + 1.3%** (sconto da 1.5% + 2.5%) |

#### Modalit√† Completa (Tutti Registrati) - Dalla 2¬∞ Transazione

##### Modalit√† 1: Senza Stripe (Pagamento Esterno)
Il committente paga il prestatore al di fuori del SaaS.

**Flusso di pagamento commissioni:**
1. Prestatore e committente si accordano e inseriscono i dati nel SaaS
2. **Pagamento commissioni separato**: 
   - Ogni parte paga la propria commissione separatamente
   - **OPPURE**:  il committente pu√≤ scegliere di pagare anche per il prestatore (se il prestatore autorizza durante l'inserimento dei dati). Le commissioni del prestatore verranno **detratte dal suo netto**
3. **I documenti vengono generati solo dopo che ENTRAMBI hanno pagato le loro commissioni**

| Scenario | Commissione Prestatore | Commissione Committente | Totale |
|----------|------------------------|-------------------------|--------|
| Entrambi privati | 0.8% | 0.8% | 1.6% |
| Committente sostituto d'imposta | 0.8% | 1.3% | 2.1% |

##### Modalit√† 2: Con Stripe (Pagamento Gestito dal SaaS)
Il committente paga tramite il SaaS che gestisce l'intero flusso di pagamento.

| Scenario | Commissione Prestatore | Commissione Committente | Totale |
|----------|------------------------|-------------------------|--------|
| Entrambi privati | 1.5% | 1.5% | 3.0% |
| Committente sostituto d'imposta | 1.5% | 2.5% | 4.0% |

**Flusso di pagamento con Stripe:**
1. **Il committente paga l'importo lordo tramite il SaaS (Stripe)**
2. **Il prestatore riceve**:
   - Importo netto
   - Meno le commissioni del SaaS
3. **Il SaaS trattiene** le commissioni di entrambe le parti
4. **A pagamento avvenuto**: il sistema genera automaticamente tutti i file scaricabili
5. **Marca da bollo**: sempre separata dal pagamento (il prestatore deve acquistarla fisicamente)

#### Modalit√† Standalone (Utente Singolo)

| Modalit√† | Chi paga | Commissione |
|----------|----------|-------------|
| Solo Prestatore | Prestatore | 0.8% |
| Solo Committente | Committente | 1.3% (se sostituto d'imposta) |
| Solo Commercialista | Commercialista | 1.8% |

**Note**:
- Modalit√† Standalone:  solo una figura usa la piattaforma
- La piattaforma genera notifiche/istruzioni per gestire le altre parti non registrate
- Il commercialista pu√≤ inviare documenti via email da noreply@ricevuta.studio

### Sistema Incentivi per Commercialisti (Referral)

Il commercialista pu√≤ **invitare nuovi utenti** alla piattaforma. 

**Incentivo**: Se gli utenti invitati: 
- Utilizzano la piattaforma fino alla fine
- Pagano il servizio (completano transazioni)

Il commercialista guadagna **10% delle commissioni** di tutte le transazioni che gli utenti invitati effettueranno **per sempre**.

**Esempio**:
- Commercialista invita Prestatore A
- Prestatore A completa transazione con commissione totale ‚Ç¨10
- Commercialista guadagna ‚Ç¨1 (10%)
- Questo vale per ogni futura transazione del Prestatore A

---

## Gestione Marca da Bollo

### Responsabilit√†
La marca da bollo √® **sempre a carico del prestatore**. Il committente NON pu√≤ assolvere il bollo per il prestatore.

### Calcolo Automatico
Il sistema calcola automaticamente quando la marca da bollo √® necessaria (sopra ‚Ç¨77. 47) e viene inclusa nei calcoli del calcolatore gratuito.

### Opzioni di Apposizione

Il prestatore pu√≤ scegliere tra due modalit√†:

#### Opzione 1: Marca da Bollo Fisica Applicata
1. Il prestatore acquista fisicamente la marca da bollo
2. Stampa la ricevuta PDF generata dal sistema
3. Applica fisicamente la marca da bollo sulla ricevuta
4. Firma il documento
5. Conserva l'originale

#### Opzione 2: Marca da Bollo con Numero Seriale
1. Il prestatore acquista fisicamente la marca da bollo
2. **Fotografa la marca da bollo**
3. Il sistema effettua **OCR (scansione automatica)** della foto per estrarre il numero seriale
4. Il prestatore **conferma il numero** estratto
5. Il numero viene inserito nella ricevuta PDF
6. Il prestatore deve **conservare fisicamente la marca da bollo per 10 anni**

### Indicazioni nel PDF
Nel PDF della ricevuta generata viene **indicato chiaramente**:
- Se √® necessaria la marca da bollo
- Dove applicarla sul documento
- Istruzioni per la conservazione

---

## Sistema di Notifiche e Task Management

### Logica Notifiche
Il sistema genera **notifiche e promemoria** automatici per guidare gli utenti su:
- Cosa fare
- Quando farlo
- Come verificare che sia stato fatto

### Gestione "Segna come Fatto"
- Ogni notifica/task pu√≤ essere segnato dall'utente come **"Gi√† fatto"**
- Una volta segnato, la notifica **sparisce dalla dashboard**
- Questo vale per tutte le modalit√† (completa e standalone)

### Esempi di Notifiche

#### Modalit√† Solo Prestatore: 
- "Richiedi al committente l'F24 pagato entro il 16/02/2026"
- "Verifica che il committente abbia emesso la CU entro il 16/03/2026"

#### Modalit√† Solo Committente:
- "Richiedi al prestatore la firma sulla ricevuta"
- "Verifica che il prestatore abbia applicato la marca da bollo"

#### Modalit√† Solo Commercialista:
- "Invia al prestatore la ricevuta firmata"
- "Verifica applicazione marca da bollo con il prestatore"

---

## Sistema di Logging e Audit Trail

### Requisiti
**Tutti i log devono essere molto rigidi e ricostruibili facilmente** in caso di: 
- Reclami
- Audit
- Verifiche fiscali
- Controversie

### Cosa Viene Loggato

#### Log Azioni Utente
- Ogni creazione/modifica/eliminazione documento
- Timestamp preciso
- Utente che ha effettuato l'azione
- IP address
- Dati prima e dopo la modifica

#### Log Decisioni
- Autorizzazioni concesse/revocate
- Scelte utente (es. "Committente paga per entrambi")
- Conferme (es. conferma numero marca da bollo dopo OCR)
- Notifiche segnate come "fatto"

#### Log Transazioni
- Ogni pagamento (commissioni)
- Metodo di pagamento utilizzato
- Importi dettagliati
- Riferimenti Stripe (se applicabile)

#### Log Documenti
- Ogni generazione PDF
- Hash del documento generato
- Chi lo ha scaricato e quando
- Eventuali rigenerazioni

#### Log Comunicazioni
- Email inviate (mittente, destinatario, timestamp)
- Notifiche inviate
- Messaggi tra utenti

### Conservazione Log
- I log devono essere conservati per **almeno 10 anni** (in linea con obblighi fiscali)
- Backup automatici e ridondanti
- Accesso ai log solo per admin e in caso di audit

### Visualizzazione Audit Trail

#### Per Utenti
- Ogni utente pu√≤ vedere il proprio "audit trail" (storico completo azioni)
- Il commercialista pu√≤ vedere l'audit trail dei clienti autorizzati
- In caso di controversia, possibilit√† di esportare l'intero audit trail

#### Per Admin
- **Ricerca utente** ‚Üí accesso immediato al log completo
- **Filtro per data**:  da [data] a [data]
- **Export log utente**: CSV/JSON per range di date specifico
- Utilizzabile per audit, reclami, controversie legali

---

## Contenuti

- **Blog** (vedi sezione dedicata sotto)
- **SaaS**: 
  - Gratuito per calcolare esempio ricevuta
  - **Prima transazione GRATUITA** (o scontata con Stripe)
  - A pagamento con commissione dalla seconda transazione

---

## üìù BLOG - Struttura e Gestione

### Obiettivo del Blog

Il blog serve a: 
- Fornire **informazioni autorevoli e verificate** su prestazioni occasionali, normative fiscali, adempimenti
- Migliorare il **posizionamento SEO** del sito
- Attrarre **traffico organico** di utenti interessati
- Educare il pubblico target sulla burocrazia fiscale

### Architettura del Blog

Il blog √® composto da **2 pagine principali**: 

#### 1. Pagina Galleria `/blog`
- **URL**: `https://ricevuta.studio/blog`
- Mostra **l'elenco di tutti gli articoli** pubblicati
- Design ispirato alla home page della piattaforma
- Layout degno dei **migliori blog esistenti**

#### 2. Pagina Articolo `/blog/[slug]`
- **URL dinamico**: `https://ricevuta.studio/blog/[slug]` (es. `/blog/come-fare-ricevuta-prestazione-occasionale`)
- Mostra il **contenuto completo** di un singolo articolo
- Layout ottimizzato per la lettura (ispirato ai migliori blog)
- Il contenuto viene caricato da file **Markdown**

---

### Gestione Articoli - Database in Memoria

Gli articoli del blog vengono gestiti come un **"database in memoria"**:  i file vengono importati e processati da Next.js in fase di **compilazione (build time)**.

#### Struttura File System

```
/content
  /blog
    /come-fare-ricevuta-prestazione-occasionale
      index.md
      image1.jpg
      image2.png
    /ritenuta-acconto-guida-completa
      index.md
      cover.jpg
    /limiti-prestazioni-occasionali-2026
      index.md
```

**Oppure** (struttura alternativa flat):

```
/content
  /blog
    come-fare-ricevuta-prestazione-occasionale. md
    ritenuta-acconto-guida-completa. md
    limiti-prestazioni-occasionali-2026.md
  /images
    /blog
      come-fare-ricevuta-1.jpg
      ritenuta-acconto-cover.jpg
```

**Nota**:  Verr√† scelta la soluzione migliore in fase di implementazione.

#### Struttura di Ogni Articolo

Ogni articolo √® composto da: 

**1. Metadati (Frontmatter)** - nel file Markdown: 
```markdown
---
title: "Come fare una ricevuta per prestazione occasionale"
slug: "come-fare-ricevuta-prestazione-occasionale"
shortText: "Guida completa passo-passo per creare una ricevuta per prestazione occasionale conforme alla normativa italiana."
publishedAt: "2026-01-20"
updatedAt: "2026-01-22"
author: "ricevuta.studio"
tags: ["ricevute", "prestazioni occasionali", "guida"]
coverImage: "/images/blog/come-fare-ricevuta-cover.jpg"
---

# Contenuto dell'articolo in Markdown

Lorem ipsum dolor sit amet... 

![Esempio ricevuta](./image1.jpg)

## Sezione 1
... 
```

**2. Contenuto Markdown** - corpo dell'articolo con:
- Testo formattato (titoli, paragrafi, liste, grassetti, corsivi)
- **Immagini** (riferite tramite path relativi o assoluti)
- Link esterni
- Codici esempio (se necessario)
- Tabelle

#### Campi Obbligatori per Ogni Articolo

| Campo | Tipo | Descrizione |
|-------|------|-------------|
| **title** | String | Titolo completo dell'articolo (usato come H1 e meta title) |
| **slug** | String | URL-friendly identifier (usato per l'URL `/blog/[slug]`) |
| **shortText** | String | Breve descrizione/anteprima (150-200 caratteri, usata in galleria e meta description) |
| **publishedAt** | Date | Data di pubblicazione |
| **updatedAt** | Date (opzionale) | Data ultimo aggiornamento |
| **author** | String | Autore dell'articolo |
| **tags** | Array[String] | Tag/categorie per organizzazione e SEO |
| **coverImage** | String | Path immagine di copertina (usata in galleria e condivisioni social) |

---

### Processo di Pubblicazione Articolo

#### Workflow per Creare un Nuovo Articolo

1. **Creare il file Markdown** nella cartella `/content/blog/` con nome `[slug].md`
2. **Compilare i metadati** (frontmatter) con tutti i campi obbligatori
3. **Scrivere il contenuto** in Markdown
4. **Aggiungere immagini** (se necessarie) nella cartella immagini o embedded nel file
5. **Commit e push** su repository
6. **Next.js importa automaticamente** il file in fase di build
7. L'articolo **appare nella galleria `/blog`**
8. L'articolo √® **accessibile all'URL** `/blog/[slug]`

**Nessun database esterno richiesto**:  tutto viene processato staticamente da Next.js.

---

### Tecnologie e Implementazione

#### Librerie Next.js per Markdown

**Opzioni consigliate**: 

1. **next-mdx-remote** (per MDX - Markdown + React Components)
   - Permette di usare componenti React dentro Markdown
   - Pi√π flessibile per articoli interattivi

2. **gray-matter** + **remark** + **rehype**
   - Parsing frontmatter (metadati)
   - Conversione Markdown ‚Üí HTML
   - Supporto syntax highlighting per codice

3. **Contentlayer** (opzione avanzata)
   - Type-safe content management
   - Validazione automatica metadati
   - Ottimizzato per Next.js App Router

**Nota**: La scelta finale verr√† fatta in fase di implementazione basandosi su requisiti specifici.

#### Build-time Processing

Next.js, in fase di **build**:
1. Legge tutti i file `.md` dalla cartella `/content/blog/`
2. **Parsa il frontmatter** (metadati)
3. **Converte Markdown ‚Üí HTML**
4. Genera **pagine statiche** per ogni articolo (`/blog/[slug]`)
5. Crea la **lista articoli** per la pagina galleria `/blog`

**Vantaggi**:
- ‚úÖ **Performance**:  tutto statico, caricamento istantaneo
- ‚úÖ **SEO**: pagine pre-renderizzate, perfette per Google
- ‚úÖ **Semplicit√†**: nessun database da gestire
- ‚úÖ **Version control**: articoli tracciati su Git

---

### Design e Layout

#### Pagina Galleria `/blog`

**Ispirazione Design**:
- Layout simile alla **home page** della piattaforma (minimalista, pulito)
- Grid/Card layout per articoli (responsive)
- Riferimenti ai **migliori blog esistenti** (Medium, Stripe Blog, Vercel Blog)

**Elementi della Card Articolo**:
- Immagine di copertina (`coverImage`)
- Titolo (`title`)
- Anteprima testo (`shortText`)
- Data pubblicazione (`publishedAt`)
- Tag (`tags`)
- Link "Leggi di pi√π" ‚Üí `/blog/[slug]`

**Features**:
- Paginazione (se molti articoli)
- Filtro per tag/categoria
- Ricerca articoli (opzionale)
- Articoli in evidenza / pi√π letti (opzionale)

#### Pagina Articolo `/blog/[slug]`

**Ispirazione Design**:
- Layout ottimizzato per **leggibilit√†** (tipografia chiara, spazi bianchi)
- Ispirato ai **migliori blog** (Medium, Notion Blog, Ghost themes)

**Elementi della Pagina**:
- **Header**:
  - Titolo articolo (H1)
  - Data pubblicazione e ultimo aggiornamento
  - Tempo di lettura stimato
  - Autore
  - Tag
- **Immagine di copertina** (full-width o contenuta)
- **Contenuto Markdown renderizzato**: 
  - Tipografia ottimizzata
  - Syntax highlighting per codice
  - Immagini responsive
  - Table of Contents (indice) per articoli lunghi (opzionale)
- **Footer articolo**:
  - Condivisione social (LinkedIn, Twitter, Facebook)
  - Articoli correlati
  - CTA:  "Prova il calcolatore gratuito" / "Crea la tua prima ricevuta"

**Features Avanzate (opzionali)**:
- Progress bar lettura
- Commenti (Disqus, Giscus)
- Newsletter subscription
- Breadcrumb navigation

---

### SEO e Performance

#### Ottimizzazione SEO

Ogni articolo deve avere: 
- **Meta title**:  `title` (max 60 caratteri)
- **Meta description**:  `shortText` (max 160 caratteri)
- **Open Graph tags** (per social sharing):
  - `og:title`, `og:description`, `og:image` (coverImage)
- **Schema. org markup** (Article, BlogPosting)
- **Canonical URL**:  `https://ricevuta.studio/blog/[slug]`
- **Sitemap XML** con tutti gli articoli

#### Performance

- ‚úÖ **Static Generation** (SSG): tutte le pagine pre-renderizzate
- ‚úÖ **Image Optimization**: `next/image` per immagini ottimizzate
- ‚úÖ **Lazy loading**: immagini e componenti pesanti
- ‚úÖ **Minified HTML/CSS/JS**
- ‚úÖ **Lighthouse Score**: target 95+ per tutti i parametri

---

### Esempio di Struttura File Articolo

```markdown
---
title: "Prestazioni Occasionali 2026:  Guida Completa ai Limiti e Obblighi"
slug: "prestazioni-occasionali-2026-guida-completa"
shortText: "Tutto quello che devi sapere sui limiti di guadagno, obblighi INPS, ritenute d'acconto e normative per le prestazioni occasionali nel 2026."
publishedAt: "2026-01-15"
updatedAt: "2026-01-22"
author: "Redazione ricevuta.studio"
tags: ["prestazioni occasionali", "normative 2026", "INPS", "guida"]
coverImage: "/images/blog/prestazioni-occasionali-2026.jpg"
---

# Prestazioni Occasionali 2026: Guida Completa

Le prestazioni occasionali sono una **modalit√† di lavoro flessibile** molto utilizzata in Italia, ma spesso circondata da dubbi e confusione normativa. 

In questa guida completa scoprirai:
- ‚úÖ Cos'√® una prestazione occasionale
- ‚úÖ Limiti di guadagno (‚Ç¨5.000/anno INPS)
- ‚úÖ Come emettere una ricevuta conforme
- ‚úÖ Obblighi fiscali e previdenziali

![Esempio di ricevuta](./ricevuta-esempio.jpg)

## Cos'√® una Prestazione Occasionale?

Una prestazione occasionale √® un lavoro **autonomo, non continuativo** che... 

### Caratteristiche principali

1. **Non √® un'attivit√† abituale**
2. **Non richiede P.IVA**
3. **Ha limiti di guadagno**

## Limiti di Guadagno 2026

| Limite | Importo | Cosa Succede |
|--------|---------|--------------|
| INPS | ‚Ç¨5.000/anno | Iscrizione Gestione Separata obbligatoria |
| [DA VERIFICARE] | ?  | Da verificare con Agenzia Entrate |

... 

## Come Creare una Ricevuta

Puoi usare il nostro [calcolatore gratuito](#) per...

---

**Hai bisogno di aiuto?** [Contattaci](#) o [prova il SaaS gratuito](#).
```

---

### Manutenzione e Aggiornamenti

#### Come Aggiornare un Articolo

1. Modificare il file `.md` corrispondente
2. Aggiornare il campo `updatedAt` nel frontmatter
3. Commit e push
4. Next.js rigenera la pagina al prossimo build

#### Come Eliminare un Articolo

1. Eliminare il file `.md`
2. Next.js rimuove automaticamente la pagina al prossimo build
3. Impostare **redirect 301** se l'URL era molto linkato (per SEO)

#### Versioning

Tutti gli articoli sono tracciati su Git: 
- Storico completo modifiche
- Possibilit√† di rollback
- Collaboration tra autori

---

**Nota Finale**: Tutti i dettagli tecnici (librerie esatte, componenti React, styling) verranno definiti in fase di implementazione.  Questa sezione definisce la **struttura logica e funzionale** del blog.

---

## üåç Espansione e Scalabilit√† Futura

### Visione Lungo Termine

**Filosofia**:  Se il progetto dovesse funzionare, continuer√≤ a mantenerlo e svilupparlo finch√© ne avr√≤ voglia e risulter√† utile.

### Roadmap Espansione

#### Fase 1: Italia - Prestazioni Occasionali (MVP)
**Status**: Attuale  
**Focus**: Consolidare il prodotto per il mercato italiano

#### Fase 2: Espansione Internazionale üåç
**Mercati Target** (da sviluppare pi√π avanti):

**Svizzera üá®ÔøΩÔøΩÔøΩ**
- **Perch√©**: Sistema fiscale molto diverso dall'Italia, molta confusione per freelancer e expat italiani
- **Opportunit√†**: Grigiore normativo elevato, alto potenziale revenue (salari pi√π alti)
- **Target**: Expat italiani in Svizzera, frontalieri, freelancer occasionali
- **Normative**: Da studiare (imposte cantonali, AVS, ecc.)

**Spagna üá™üá∏**
- **Perch√©**:  Molti expat italiani, sistema fiscale complesso per autonomi occasionali
- **Opportunit√†**: Mercato ampio, alta domanda di semplificazione burocratica
- **Target**:  Expat italiani in Spagna, "aut√≥nomos" occasionali
- **Normative**: Da studiare (r√©gimen especial de trabajadores aut√≥nomos)

**Altri Paesi (valutazione futura)**:
- Germania (molti italiani, burocrazia complessa)
- Francia (sistema fiscale articolato)
- UK (post-Brexit, nuove normative freelance)

**Nota**: L'espansione internazionale √® la parte con **pi√π potenziale di revenue** vista la complessit√† normativa maggiore e i salari mediamente pi√π alti.

#### Fase 3: App Mobile üì± (Dopo consolidamento web)

**Quando**: Dopo che la piattaforma web responsive √® stabile e ha utenza consolidata

**Piattaforme**:
- iOS (App Store)
- Android (Google Play)

**Features Mobile**:
- Creazione ricevuta veloce (ottimizzata mobile)
- Scansione marca da bollo con fotocamera (OCR nativo)
- Notifiche push per scadenze
- Accesso dashboard in mobilit√†
- Possibile pagamento in-app (Apple Pay, Google Pay)

**Tecnologia**:
- React Native (condivisione codice con web)
- Oppure Flutter (da valutare)

**Non prioritario per MVP**, ma logico step futuro. 

---

### Cosa NON Verr√† Fatto (almeno per ora)

- ‚ùå **Fatturazione P.IVA** (forfettari/ordinari): fuori scope, mercato gi√† coperto
- ‚ùå **Gestione completa contabilit√†**: troppo complesso, richiede commercialista vero
- ‚ùå **Dichiarazione redditi automatica**: responsabilit√† fiscale troppo alta
- ‚ùå **B2B per grosse aziende** (piani enterprise): non per ora
- ‚ùå **White Label**: non intendo vendere la piattaforma ad altri

**Focus**: Mantenere la piattaforma semplice, focalizzata su prestazioni occasionali, ed eventualmente espandere geograficamente.

---

## Stack Tecnologico

### Frontend
- **Framework**: Next.js 14+ (App Router)
- **Styling**: Tailwind CSS + shadcn/ui
- **PDF Generation**: jsPDF (documenti fiscali)
- **OCR**: Libreria OCR per scansione marca da bollo
- **Markdown Processing**: gray-matter + remark/rehype (o next-mdx-remote o Contentlayer)
- **Charts (Dashboard Admin)**: Recharts, Chart.js, o D3.js
- **Tables (Dashboard Admin)**: TanStack Table (React Table)

### Backend
- **Runtime**: Node.js (Edge Functions Supabase)
- **Database**: PostgreSQL (Supabase)
- **Auth**: Supabase Auth (Magic Link)
- **Storage**: Supabase Storage (documenti fiscali + foto marche da bollo)
- **Real-time**: Supabase Realtime (notifiche in-app)
- **Payments**: Stripe (gestione pagamenti e commissioni)
- **Email**: Sistema email per noreply@ricevuta.studio
- **Logging**: Sistema di audit trail robusto e immutabile

### Content Management (Blog)
- **Articoli**: File Markdown in `/content/blog/`
- **Processing**: Build-time con Next.js (SSG)
- **Immagini**: next/image per ottimizzazione

### Analytics
- **Dashboard Admin Interno**: Custom dashboard `/admin` con query PostgreSQL
- **NO tool esterni** per analytics (per ora, solo cookie essenziali)

### Design
- **Responsive**: Mobile First
- **Compatibilit√†**:  Smartphone, Tablet, PC
- **Browser**:  Tutti i browser moderni
- **Colore principale**: Blu professionale (logo minimalista da creare)

### Future (Espansione)
- **App Mobile**: React Native o Flutter (da valutare)
- **Internazionalizzazione (i18n)**: Per Svizzera, Spagna, ecc. 

---

## Design e Stile

**Minimalista come Fiscozen**
- Mobile First
- Responsive su tutti i dispositivi (smartphone, tablet, PC)
- Compatibile con tutti i tipi di browser
- **Colore principale**: Blu professionale
- **Logo**: Minimalista e moderno (da creare)
- **Tone of voice**: Amichevole e informale ("Ciao!  Ecco come funziona...")

---

## MVP e Roadmap

**Obiettivo**: Lanciare il progetto completo con tutte le funzionalit√†: 
- Area Prestatore (con dashboard completa)
- Area Committente (con dashboard completa)
- Area Commercialista (con dashboard completa)
- **Dashboard Analytics Admin Interno**
- **Blog** con galleria articoli e pagine articolo singolo
- **Modalit√† completa** (tutti registrati)
- **Modalit√† standalone** (solo prestatore / solo committente / solo commercialista)
- **Prima transazione gratuita/scontata**
- Sistema di collegamento bidirezionale tra utenti
- Sistema di autorizzazioni e revoca per tutte le figure
- Sistema incentivi/referral per commercialisti
- Sistema di pagamento integrato (entrambe le modalit√† Stripe/non-Stripe)
- Generazione automatica documenti (ricevute, F24, CU)
- Sistema gestione marca da bollo con OCR
- **Sistema notifiche e task management** con "segna come fatto"
- **Sistema di logging e audit trail** completo e ricostruibile (con ricerca utente e export log)
- Tracciamento automatico normative fiscali

**Roadmap Futura**:
1. Consolidamento Italia
2. Espansione Svizzera/Spagna (expat italiani)
3. App Mobile (iOS/Android)

---

## Tempistiche

Realizzarlo il pi√π velocemente possibile. 

---

## üö® NORMATIVE FISCALI DA SVILUPPARE

> **SEZIONE DA APPROFONDIRE**:  Tutte le logiche normative, calcoli fiscali e regole devono essere sviluppate in dettaglio successivamente.  Questa sezione raccoglie tutti i riferimenti normativi che il sistema deve gestire.

### Limite ‚Ç¨5.000/anno - Gestione Separata INPS

**Regola**: Il limite di ‚Ç¨5.000/anno riguarda l'iscrizione alla Gestione Separata INPS.

**Comportamento Sistema**:
- ‚úÖ Il sistema **traccia automaticamente** il totale guadagnato da ogni prestatore nell'anno fiscale
- ‚úÖ Quando il prestatore raggiunge **‚Ç¨4.500**, il sistema mostra un avviso:  "Stai per raggiungere il limite INPS (‚Ç¨5.000)"
- ‚úÖ Quando il prestatore supera **‚Ç¨5.000**, il sistema mostra notifica: "Hai superato il limite INPS - Iscrizione alla Gestione Separata obbligatoria"
- ‚ùå Il sistema **NON blocca** la creazione di nuove ricevute
- ‚ùå Il sistema **NON suggerisce** l'apertura di P.IVA

**Nota**: Il limite ‚Ç¨5.000 riguarda SOLO l'iscrizione INPS, non limita il lavoro occasionale.

### Limiti Annuali da Verificare

#### ‚ö†Ô∏è DA VERIFICARE:  Importo Massimo Totale Annuo
**Domanda**: Esiste un limite massimo alla somma di TUTTE le ricevute che un prestatore pu√≤ emettere in un anno?

**Azione**: Verificare con fonti ufficiali (Agenzia delle Entrate, INPS)

**Implementazione futura**: Se esiste un limite, il sistema dovr√†:
- Tracciarlo automaticamente
- Avvisare quando ci si avvicina
- Eventualmente bloccare o avvisare al superamento

#### ‚ö†Ô∏è DA VERIFICARE:  Importo Massimo per Singolo Committente
**Domanda**:  Esiste un limite massimo che un prestatore pu√≤ ricevere da UN SINGOLO committente in un anno?

**Azione**: Verificare con fonti ufficiali (Agenzia delle Entrate, normativa lavoro occasionale)

**Implementazione futura**: Se esiste un limite, il sistema dovr√†:
- Tracciare per ogni coppia prestatore-committente
- Avvisare quando ci si avvicina al limite
- Eventualmente bloccare o avvisare al superamento

### Marca da Bollo - Soglia ‚Ç¨77. 47

**Regola**: La marca da bollo √® obbligatoria per ricevute con importo superiore a ‚Ç¨77.47.

**Comportamento Sistema**:
- ‚úÖ Calcolo automatico della necessit√† della marca da bollo
- ‚úÖ Indicazione nel PDF dove applicarla
- ‚úÖ Sistema OCR per acquisizione numero seriale
- ‚úÖ Tracking conservazione 10 anni

### Ritenuta d'Acconto

**Da sviluppare**:
- Percentuali applicabili
- Casi in cui √® obbligatoria
- Differenza privato vs sostituto d'imposta
- Calcoli e trattenute

### Contributi INPS - Gestione Separata

**Da sviluppare**:
- Aliquote contributive
- Soglie di applicazione (‚Ç¨5.000)
- Esenzioni
- Modalit√† versamento

### Codici Tributo F24

**Da sviluppare**:
- Mappatura codici tributo corretti per: 
  - Ritenute d'acconto
  - Contributi INPS
  - Altri tributi
- Scadenze versamenti
- Calcolo importi

### Certificazione Unica (CU)

**Da sviluppare**:
- Generazione automatica
- Campi obbligatori
- Tempistiche di rilascio (entro 16 marzo)
- Formato e validazione

### Dichiarazione dei Redditi

**Da sviluppare**:
- Quadri da compilare per prestazioni occasionali
- Supporto per esportazione dati
- Scadenze e adempimenti
- Come indicare ritenute e contributi

### Modello 770 (per Committenti)

**Da sviluppare**:
- Obblighi per committenti sostituti d'imposta
- Scadenze
- Dati da includere

### Altre Normative

**Da sviluppare**:
- Limiti per committenti privati vs sostituti d'imposta
- Differenze privato vs P.IVA
- Normative regionali/comunali
- Aggiornamenti normativi annuali
- Sanzioni per inadempimenti

---

## ‚ö†Ô∏è GESTIONE ERRORI E CONTROVERSIE

> **SEZIONE DA SVILUPPARE**: Questa sezione raccoglie tutti i casi di errore e controversia che devono essere gestiti dalla piattaforma.

### Errori nella Ricevuta Gi√† Pagata

**Scenario**: Prestatore/committente hanno gi√† pagato le commissioni e i documenti sono stati generati, ma si accorge di un errore (importo sbagliato, dati errati, ecc.)

**Da definire**:
- Pu√≤ rigenerare gratuitamente? 
- Deve pagare di nuovo?
- C'√® un limite di rigenerazioni gratuite (es. 1 correzione gratis entro 24h)?
- Chi approva la rigenerazione? 
- Come viene loggato? 

### Contestazione Pagamento Stripe

**Scenario**: Il committente fa chargeback su Stripe dopo aver ricevuto i documenti. 

**Da definire**: 
- Come si protegge la piattaforma?
- I documenti vengono revocati?
- L'utente viene bannato?
- Come si gestisce la controversia?

### Supporto e Mediazione

**Da definire**:
- Chi gestisce le controversie?
  - Tu manualmente?
  - Sistema automatico di ticket?
  - Il commercialista pu√≤ mediare?
- Tempi di risposta
- Escalation procedure

### Altri Casi da Definire

- Documento generato con errori tecnici (bug della piattaforma)
- Utente contesta la normativa applicata
- Calcoli fiscali errati
- Documenti persi/non scaricabili
- Account compromesso
- Frode/abuso della piattaforma

---

## üîí GDPR, PRIVACY E SICUREZZA

> **SEZIONE DA SVILUPPARE**:  Policy complete su privacy, GDPR, sicurezza dati e cookie. 

### Conservazione Dati e Documenti

#### NON √à Conservazione Sostitutiva
**IMPORTANTE**: La piattaforma **NON fa conservazione sostitutiva** dei documenti fiscali.

- La **responsabilit√† della conservazione** √® **dell'utente**
- L'utente deve scaricare e conservare i documenti per i termini di legge (10 anni)
- La piattaforma offre uno spazio di archiviazione come servizio aggiuntivo, ma **non sostituisce** gli obblighi di conservazione dell'utente

#### Policy Conservazione Piattaforma

La piattaforma conserva i dati secondo queste regole:

**Account Attivi**:
- Se l'utente √® registrato e ha avuto **attivit√† negli ultimi 2 anni**:  i dati vengono conservati per **10 anni** dall'ultima transazione
- "Attivit√†" significa:  login, creazione documenti, pagamenti

**Account Inattivi (oltre 2 anni)**:
1.  Dopo **2 anni di inattivit√†**, viene avviata la procedura di cancellazione
2. L'utente riceve **diverse email di notifica** (a 2 anni, 2 anni + 15 giorni, 2 anni + 45 giorni)
3. **60 giorni** dopo la prima notifica, se l'utente NON si logga, l'account viene **eliminato completamente**
4. Se l'utente **si logga e conferma** di voler mantenere l'account, la procedura di cancellazione viene annullata

**Chiusura Piattaforma**:
- La piattaforma **si riserva il diritto di chiudere** in qualsiasi momento
- **Preavviso di 60 giorni** agli utenti
- Gli utenti vengono informati via email e in-app
- Gli utenti hanno 60 giorni per **esportare tutti i loro dati**
- Chi non esporta i dati entro 60 giorni li **perde definitivamente**

### Sicurezza Dati

**Da sviluppare**:
- Crittografia dati sensibili (at-rest e in-transit)
- Gestione codici fiscali, IBAN, importi
- Protezione accessi commercialista
- Notifiche accessi sospetti
- Backup e disaster recovery
- Conformit√† GDPR

### Diritti Utente (GDPR)

**Da sviluppare**:
- Diritto di accesso
- Diritto di rettifica
- Diritto alla cancellazione ("diritto all'oblio")
  - Come gestire se ci sono documenti fiscali da conservare per legge? 
- Diritto alla portabilit√†
- Diritto di opposizione

### Cookie e Tracciamento

**Policy Attuale**:  Solo cookie essenziali

- **Cookie essenziali**: necessari per il funzionamento del sito (autenticazione, sessione)
- **NO cookie analytics** (al momento)
- **NO cookie pubblicitari**
- **NO banner cookie** (non necessario per cookie solo essenziali)

**Futuro**: Se verranno aggiunti cookie analytics o pubblicitari, sar√† necessario implementare cookie banner conforme GDPR.

### Privacy Policy e Termini di Servizio

**Da sviluppare**:
- Privacy Policy completa
- Termini e Condizioni d'Uso
- Cookie Policy
- Informativa trattamento dati
- Consensi richiesti all'utente

---

**Versione documento**:  5.0  
**Ultima modifica**: 2026-01-22  
**Autore**: montron3